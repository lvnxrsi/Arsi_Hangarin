{% extends 'base.html' %}
{% load static %}
{% block content %}
<div class="content category-page">
  <div class="container-fluid">
    <h2 class="page-title text-center"> Categories </h2>
    <p class="subtitle text-center">Organize your tasks into cute little folders!</p>

    <div class="toolbar d-flex justify-content-between align-items-center mb-4 flex-wrap">
      <form method="GET" class="search-bar d-flex mb-2">
        <input type="text" name="q" class="form-control pastel-input" placeholder="🔍 Search categories..." value="{{ request.GET.q }}">
        <button class="btn pastel-yellow-btn ml-2" type="submit">Search</button>
      </form>

      <form method="GET" class="sort-bar mb-2">
        {% if request.GET.q %}
          <input type="hidden" name="q" value="{{ request.GET.q }}">
        {% endif %}
        <select name="order" class="form-control pastel-input" onchange="this.form.submit()">
          <option value="name" {% if current_order == 'name' %}selected{% endif %}>A → Z</option>
          <option value="-name" {% if current_order == '-name' %}selected{% endif %}>Z → A</option>
        </select>
      </form>

      <a href="{% url 'category-add' %}" class="btn pastel-pink-btn mb-2">＋ Add Category</a>
    </div>

    <div class="note-container">
      {% for category in categories %}
        <div class="note-card">
          <h5 class="note-title">📁 {{ category.name }}</h5>
          <div class="note-actions">
            <a href="{% url 'category-update' category.id %}" class="btn small-btn edit-btn">✏️ Edit</a>
            <a href="{% url 'category-delete' category.id %}" class="btn small-btn delete-btn">🗑️ Delete</a>
          </div>
        </div>
      {% empty %}
        <div class="empty-state text-center">
          <p>No categories found 💭</p>
        </div>
      {% endfor %}
    </div>

    {% include 'include/pagination.html' %}
  </div>
</div>
{% endblock %}
